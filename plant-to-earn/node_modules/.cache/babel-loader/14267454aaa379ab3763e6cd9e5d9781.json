{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.verifyPseudoArgs = exports.pseudos = void 0; // While filters are precompiled, pseudos get called when they are needed\n\nexports.pseudos = {\n  empty: function (elem, _a) {\n    var adapter = _a.adapter;\n    return !adapter.getChildren(elem).some(function (elem) {\n      // FIXME: `getText` call is potentially expensive.\n      return adapter.isTag(elem) || adapter.getText(elem) !== \"\";\n    });\n  },\n  \"first-child\": function (elem, _a) {\n    var adapter = _a.adapter,\n        equals = _a.equals;\n\n    if (adapter.prevElementSibling) {\n      return adapter.prevElementSibling(elem) == null;\n    }\n\n    var firstChild = adapter.getSiblings(elem).find(function (elem) {\n      return adapter.isTag(elem);\n    });\n    return firstChild != null && equals(elem, firstChild);\n  },\n  \"last-child\": function (elem, _a) {\n    var adapter = _a.adapter,\n        equals = _a.equals;\n    var siblings = adapter.getSiblings(elem);\n\n    for (var i = siblings.length - 1; i >= 0; i--) {\n      if (equals(elem, siblings[i])) return true;\n      if (adapter.isTag(siblings[i])) break;\n    }\n\n    return false;\n  },\n  \"first-of-type\": function (elem, _a) {\n    var adapter = _a.adapter,\n        equals = _a.equals;\n    var siblings = adapter.getSiblings(elem);\n    var elemName = adapter.getName(elem);\n\n    for (var i = 0; i < siblings.length; i++) {\n      var currentSibling = siblings[i];\n      if (equals(elem, currentSibling)) return true;\n\n      if (adapter.isTag(currentSibling) && adapter.getName(currentSibling) === elemName) {\n        break;\n      }\n    }\n\n    return false;\n  },\n  \"last-of-type\": function (elem, _a) {\n    var adapter = _a.adapter,\n        equals = _a.equals;\n    var siblings = adapter.getSiblings(elem);\n    var elemName = adapter.getName(elem);\n\n    for (var i = siblings.length - 1; i >= 0; i--) {\n      var currentSibling = siblings[i];\n      if (equals(elem, currentSibling)) return true;\n\n      if (adapter.isTag(currentSibling) && adapter.getName(currentSibling) === elemName) {\n        break;\n      }\n    }\n\n    return false;\n  },\n  \"only-of-type\": function (elem, _a) {\n    var adapter = _a.adapter,\n        equals = _a.equals;\n    var elemName = adapter.getName(elem);\n    return adapter.getSiblings(elem).every(function (sibling) {\n      return equals(elem, sibling) || !adapter.isTag(sibling) || adapter.getName(sibling) !== elemName;\n    });\n  },\n  \"only-child\": function (elem, _a) {\n    var adapter = _a.adapter,\n        equals = _a.equals;\n    return adapter.getSiblings(elem).every(function (sibling) {\n      return equals(elem, sibling) || !adapter.isTag(sibling);\n    });\n  }\n};\n\nfunction verifyPseudoArgs(func, name, subselect, argIndex) {\n  if (subselect === null) {\n    if (func.length > argIndex) {\n      throw new Error(\"Pseudo-class :\".concat(name, \" requires an argument\"));\n    }\n  } else if (func.length === argIndex) {\n    throw new Error(\"Pseudo-class :\".concat(name, \" doesn't have any arguments\"));\n  }\n}\n\nexports.verifyPseudoArgs = verifyPseudoArgs;","map":{"version":3,"mappings":"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","names":["exports","empty","elem","_a","adapter","getChildren","some","isTag","getText","equals","prevElementSibling","firstChild","getSiblings","find","siblings","i","length","elemName","getName","currentSibling","every","sibling","verifyPseudoArgs","func","name","subselect","argIndex","Error"],"sources":["pseudo-selectors/pseudos.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}
{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.attributeRules = void 0;\n\nvar boolbase_1 = __importDefault(require(\"boolbase\"));\n/**\n * All reserved characters in a regex, used for escaping.\n *\n * Taken from XRegExp, (c) 2007-2020 Steven Levithan under the MIT license\n * https://github.com/slevithan/xregexp/blob/95eeebeb8fac8754d54eafe2b4743661ac1cf028/src/xregexp.js#L794\n */\n\n\nvar reChars = /[-[\\]{}()*+?.,\\\\^$|#\\s]/g;\n\nfunction escapeRegex(value) {\n  return value.replace(reChars, \"\\\\$&\");\n}\n/**\n * Attributes that are case-insensitive in HTML.\n *\n * @private\n * @see https://html.spec.whatwg.org/multipage/semantics-other.html#case-sensitivity-of-selectors\n */\n\n\nvar caseInsensitiveAttributes = new Set([\"accept\", \"accept-charset\", \"align\", \"alink\", \"axis\", \"bgcolor\", \"charset\", \"checked\", \"clear\", \"codetype\", \"color\", \"compact\", \"declare\", \"defer\", \"dir\", \"direction\", \"disabled\", \"enctype\", \"face\", \"frame\", \"hreflang\", \"http-equiv\", \"lang\", \"language\", \"link\", \"media\", \"method\", \"multiple\", \"nohref\", \"noresize\", \"noshade\", \"nowrap\", \"readonly\", \"rel\", \"rev\", \"rules\", \"scope\", \"scrolling\", \"selected\", \"shape\", \"target\", \"text\", \"type\", \"valign\", \"valuetype\", \"vlink\"]);\n\nfunction shouldIgnoreCase(selector, options) {\n  return typeof selector.ignoreCase === \"boolean\" ? selector.ignoreCase : selector.ignoreCase === \"quirks\" ? !!options.quirksMode : !options.xmlMode && caseInsensitiveAttributes.has(selector.name);\n}\n/**\n * Attribute selectors\n */\n\n\nexports.attributeRules = {\n  equals: function (next, data, options) {\n    var adapter = options.adapter;\n    var name = data.name;\n    var value = data.value;\n\n    if (shouldIgnoreCase(data, options)) {\n      value = value.toLowerCase();\n      return function (elem) {\n        var attr = adapter.getAttributeValue(elem, name);\n        return attr != null && attr.length === value.length && attr.toLowerCase() === value && next(elem);\n      };\n    }\n\n    return function (elem) {\n      return adapter.getAttributeValue(elem, name) === value && next(elem);\n    };\n  },\n  hyphen: function (next, data, options) {\n    var adapter = options.adapter;\n    var name = data.name;\n    var value = data.value;\n    var len = value.length;\n\n    if (shouldIgnoreCase(data, options)) {\n      value = value.toLowerCase();\n      return function hyphenIC(elem) {\n        var attr = adapter.getAttributeValue(elem, name);\n        return attr != null && (attr.length === len || attr.charAt(len) === \"-\") && attr.substr(0, len).toLowerCase() === value && next(elem);\n      };\n    }\n\n    return function hyphen(elem) {\n      var attr = adapter.getAttributeValue(elem, name);\n      return attr != null && (attr.length === len || attr.charAt(len) === \"-\") && attr.substr(0, len) === value && next(elem);\n    };\n  },\n  element: function (next, data, options) {\n    var adapter = options.adapter;\n    var name = data.name,\n        value = data.value;\n\n    if (/\\s/.test(value)) {\n      return boolbase_1.default.falseFunc;\n    }\n\n    var regex = new RegExp(\"(?:^|\\\\s)\".concat(escapeRegex(value), \"(?:$|\\\\s)\"), shouldIgnoreCase(data, options) ? \"i\" : \"\");\n    return function element(elem) {\n      var attr = adapter.getAttributeValue(elem, name);\n      return attr != null && attr.length >= value.length && regex.test(attr) && next(elem);\n    };\n  },\n  exists: function (next, _a, _b) {\n    var name = _a.name;\n    var adapter = _b.adapter;\n    return function (elem) {\n      return adapter.hasAttrib(elem, name) && next(elem);\n    };\n  },\n  start: function (next, data, options) {\n    var adapter = options.adapter;\n    var name = data.name;\n    var value = data.value;\n    var len = value.length;\n\n    if (len === 0) {\n      return boolbase_1.default.falseFunc;\n    }\n\n    if (shouldIgnoreCase(data, options)) {\n      value = value.toLowerCase();\n      return function (elem) {\n        var attr = adapter.getAttributeValue(elem, name);\n        return attr != null && attr.length >= len && attr.substr(0, len).toLowerCase() === value && next(elem);\n      };\n    }\n\n    return function (elem) {\n      var _a;\n\n      return !!((_a = adapter.getAttributeValue(elem, name)) === null || _a === void 0 ? void 0 : _a.startsWith(value)) && next(elem);\n    };\n  },\n  end: function (next, data, options) {\n    var adapter = options.adapter;\n    var name = data.name;\n    var value = data.value;\n    var len = -value.length;\n\n    if (len === 0) {\n      return boolbase_1.default.falseFunc;\n    }\n\n    if (shouldIgnoreCase(data, options)) {\n      value = value.toLowerCase();\n      return function (elem) {\n        var _a;\n\n        return ((_a = adapter.getAttributeValue(elem, name)) === null || _a === void 0 ? void 0 : _a.substr(len).toLowerCase()) === value && next(elem);\n      };\n    }\n\n    return function (elem) {\n      var _a;\n\n      return !!((_a = adapter.getAttributeValue(elem, name)) === null || _a === void 0 ? void 0 : _a.endsWith(value)) && next(elem);\n    };\n  },\n  any: function (next, data, options) {\n    var adapter = options.adapter;\n    var name = data.name,\n        value = data.value;\n\n    if (value === \"\") {\n      return boolbase_1.default.falseFunc;\n    }\n\n    if (shouldIgnoreCase(data, options)) {\n      var regex_1 = new RegExp(escapeRegex(value), \"i\");\n      return function anyIC(elem) {\n        var attr = adapter.getAttributeValue(elem, name);\n        return attr != null && attr.length >= value.length && regex_1.test(attr) && next(elem);\n      };\n    }\n\n    return function (elem) {\n      var _a;\n\n      return !!((_a = adapter.getAttributeValue(elem, name)) === null || _a === void 0 ? void 0 : _a.includes(value)) && next(elem);\n    };\n  },\n  not: function (next, data, options) {\n    var adapter = options.adapter;\n    var name = data.name;\n    var value = data.value;\n\n    if (value === \"\") {\n      return function (elem) {\n        return !!adapter.getAttributeValue(elem, name) && next(elem);\n      };\n    } else if (shouldIgnoreCase(data, options)) {\n      value = value.toLowerCase();\n      return function (elem) {\n        var attr = adapter.getAttributeValue(elem, name);\n        return (attr == null || attr.length !== value.length || attr.toLowerCase() !== value) && next(elem);\n      };\n    }\n\n    return function (elem) {\n      return adapter.getAttributeValue(elem, name) !== value && next(elem);\n    };\n  }\n};","map":{"version":3,"mappings":"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","names":["reChars","escapeRegex","value","replace","caseInsensitiveAttributes","Set","shouldIgnoreCase","selector","options","ignoreCase","quirksMode","xmlMode","has","name","exports","equals","next","data","toLowerCase","elem","attr","adapter","getAttributeValue","length","hyphen","len","hyphenIC","charAt","substr","element","test","boolbase_1","falseFunc","regex","RegExp","exists","_a","_b","hasAttrib","start","startsWith","end","endsWith","any","regex_1","anyIC","includes","not"],"sources":["attributes.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}
{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nvar __spreadArray = this && this.__spreadArray || function (to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n    if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.select = exports.filter = exports.some = exports.is = exports.aliases = exports.pseudos = exports.filters = void 0;\n\nvar css_what_1 = require(\"css-what\");\n\nvar css_select_1 = require(\"css-select\");\n\nvar DomUtils = __importStar(require(\"domutils\"));\n\nvar boolbase = __importStar(require(\"boolbase\"));\n\nvar helpers_js_1 = require(\"./helpers.js\");\n\nvar positionals_js_1 = require(\"./positionals.js\"); // Re-export pseudo extension points\n\n\nvar css_select_2 = require(\"css-select\");\n\nObject.defineProperty(exports, \"filters\", {\n  enumerable: true,\n  get: function () {\n    return css_select_2.filters;\n  }\n});\nObject.defineProperty(exports, \"pseudos\", {\n  enumerable: true,\n  get: function () {\n    return css_select_2.pseudos;\n  }\n});\nObject.defineProperty(exports, \"aliases\", {\n  enumerable: true,\n  get: function () {\n    return css_select_2.aliases;\n  }\n});\nvar UNIVERSAL_SELECTOR = {\n  type: css_what_1.SelectorType.Universal,\n  namespace: null\n};\nvar SCOPE_PSEUDO = {\n  type: css_what_1.SelectorType.Pseudo,\n  name: \"scope\",\n  data: null\n};\n\nfunction is(element, selector, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  return some([element], selector, options);\n}\n\nexports.is = is;\n\nfunction some(elements, selector, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  if (typeof selector === \"function\") return elements.some(selector);\n\n  var _a = (0, helpers_js_1.groupSelectors)((0, css_what_1.parse)(selector)),\n      plain = _a[0],\n      filtered = _a[1];\n\n  return plain.length > 0 && elements.some((0, css_select_1._compileToken)(plain, options)) || filtered.some(function (sel) {\n    return filterBySelector(sel, elements, options).length > 0;\n  });\n}\n\nexports.some = some;\n\nfunction filterByPosition(filter, elems, data, options) {\n  var num = typeof data === \"string\" ? parseInt(data, 10) : NaN;\n\n  switch (filter) {\n    case \"first\":\n    case \"lt\":\n      // Already done in `getLimit`\n      return elems;\n\n    case \"last\":\n      return elems.length > 0 ? [elems[elems.length - 1]] : elems;\n\n    case \"nth\":\n    case \"eq\":\n      return isFinite(num) && Math.abs(num) < elems.length ? [num < 0 ? elems[elems.length + num] : elems[num]] : [];\n\n    case \"gt\":\n      return isFinite(num) ? elems.slice(num + 1) : [];\n\n    case \"even\":\n      return elems.filter(function (_, i) {\n        return i % 2 === 0;\n      });\n\n    case \"odd\":\n      return elems.filter(function (_, i) {\n        return i % 2 === 1;\n      });\n\n    case \"not\":\n      {\n        var filtered_1 = new Set(filterParsed(data, elems, options));\n        return elems.filter(function (e) {\n          return !filtered_1.has(e);\n        });\n      }\n  }\n}\n\nfunction filter(selector, elements, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  return filterParsed((0, css_what_1.parse)(selector), elements, options);\n}\n\nexports.filter = filter;\n/**\n * Filter a set of elements by a selector.\n *\n * Will return elements in the original order.\n *\n * @param selector Selector to filter by.\n * @param elements Elements to filter.\n * @param options Options for selector.\n */\n\nfunction filterParsed(selector, elements, options) {\n  if (elements.length === 0) return [];\n\n  var _a = (0, helpers_js_1.groupSelectors)(selector),\n      plainSelectors = _a[0],\n      filteredSelectors = _a[1];\n\n  var found;\n\n  if (plainSelectors.length) {\n    var filtered = filterElements(elements, plainSelectors, options); // If there are no filters, just return\n\n    if (filteredSelectors.length === 0) {\n      return filtered;\n    } // Otherwise, we have to do some filtering\n\n\n    if (filtered.length) {\n      found = new Set(filtered);\n    }\n  }\n\n  for (var i = 0; i < filteredSelectors.length && (found === null || found === void 0 ? void 0 : found.size) !== elements.length; i++) {\n    var filteredSelector = filteredSelectors[i];\n    var missing = found ? elements.filter(function (e) {\n      return DomUtils.isTag(e) && !found.has(e);\n    }) : elements;\n    if (missing.length === 0) break;\n    var filtered = filterBySelector(filteredSelector, elements, options);\n\n    if (filtered.length) {\n      if (!found) {\n        /*\n         * If we haven't found anything before the last selector,\n         * just return what we found now.\n         */\n        if (i === filteredSelectors.length - 1) {\n          return filtered;\n        }\n\n        found = new Set(filtered);\n      } else {\n        filtered.forEach(function (el) {\n          return found.add(el);\n        });\n      }\n    }\n  }\n\n  return typeof found !== \"undefined\" ? found.size === elements.length ? elements : // Filter elements to preserve order\n  elements.filter(function (el) {\n    return found.has(el);\n  }) : [];\n}\n\nfunction filterBySelector(selector, elements, options) {\n  var _a;\n\n  if (selector.some(css_what_1.isTraversal)) {\n    /*\n     * Get root node, run selector with the scope\n     * set to all of our nodes.\n     */\n    var root = (_a = options.root) !== null && _a !== void 0 ? _a : (0, helpers_js_1.getDocumentRoot)(elements[0]);\n\n    var opts = __assign(__assign({}, options), {\n      context: elements,\n      relativeSelector: false\n    });\n\n    selector.push(SCOPE_PSEUDO);\n    return findFilterElements(root, selector, opts, true, elements.length);\n  } // Performance optimization: If we don't have to traverse, just filter set.\n\n\n  return findFilterElements(elements, selector, options, false, elements.length);\n}\n\nfunction select(selector, root, options, limit) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  if (limit === void 0) {\n    limit = Infinity;\n  }\n\n  if (typeof selector === \"function\") {\n    return find(root, selector);\n  }\n\n  var _a = (0, helpers_js_1.groupSelectors)((0, css_what_1.parse)(selector)),\n      plain = _a[0],\n      filtered = _a[1];\n\n  var results = filtered.map(function (sel) {\n    return findFilterElements(root, sel, options, true, limit);\n  }); // Plain selectors can be queried in a single go\n\n  if (plain.length) {\n    results.push(findElements(root, plain, options, limit));\n  }\n\n  if (results.length === 0) {\n    return [];\n  } // If there was only a single selector, just return the result\n\n\n  if (results.length === 1) {\n    return results[0];\n  } // Sort results, filtering for duplicates\n\n\n  return DomUtils.uniqueSort(results.reduce(function (a, b) {\n    return __spreadArray(__spreadArray([], a, true), b, true);\n  }));\n}\n\nexports.select = select;\n/**\n *\n * @param root Element(s) to search from.\n * @param selector Selector to look for.\n * @param options Options for querying.\n * @param queryForSelector Query multiple levels deep for the initial selector, even if it doesn't contain a traversal.\n */\n\nfunction findFilterElements(root, selector, options, queryForSelector, totalLimit) {\n  var filterIndex = selector.findIndex(positionals_js_1.isFilter);\n  var sub = selector.slice(0, filterIndex);\n  var filter = selector[filterIndex]; // If we are at the end of the selector, we can limit the number of elements to retrieve.\n\n  var partLimit = selector.length - 1 === filterIndex ? totalLimit : Infinity;\n  /*\n   * Set the number of elements to retrieve.\n   * Eg. for :first, we only have to get a single element.\n   */\n\n  var limit = (0, positionals_js_1.getLimit)(filter.name, filter.data, partLimit);\n  if (limit === 0) return [];\n  /*\n   * Skip `findElements` call if our selector starts with a positional\n   * pseudo.\n   */\n\n  var elemsNoLimit = sub.length === 0 && !Array.isArray(root) ? DomUtils.getChildren(root).filter(DomUtils.isTag) : sub.length === 0 ? (Array.isArray(root) ? root : [root]).filter(DomUtils.isTag) : queryForSelector || sub.some(css_what_1.isTraversal) ? findElements(root, [sub], options, limit) : filterElements(root, [sub], options);\n  var elems = elemsNoLimit.slice(0, limit);\n  var result = filterByPosition(filter.name, elems, filter.data, options);\n\n  if (result.length === 0 || selector.length === filterIndex + 1) {\n    return result;\n  }\n\n  var remainingSelector = selector.slice(filterIndex + 1);\n  var remainingHasTraversal = remainingSelector.some(css_what_1.isTraversal);\n\n  if (remainingHasTraversal) {\n    if ((0, css_what_1.isTraversal)(remainingSelector[0])) {\n      var type = remainingSelector[0].type;\n\n      if (type === css_what_1.SelectorType.Sibling || type === css_what_1.SelectorType.Adjacent) {\n        // If we have a sibling traversal, we need to also look at the siblings.\n        result = (0, css_select_1.prepareContext)(result, DomUtils, true);\n      } // Avoid a traversal-first selector error.\n\n\n      remainingSelector.unshift(UNIVERSAL_SELECTOR);\n    }\n\n    options = __assign(__assign({}, options), {\n      // Avoid absolutizing the selector\n      relativeSelector: false,\n\n      /*\n       * Add a custom root func, to make sure traversals don't match elements\n       * that aren't a part of the considered tree.\n       */\n      rootFunc: function (el) {\n        return result.includes(el);\n      }\n    });\n  } else if (options.rootFunc && options.rootFunc !== boolbase.trueFunc) {\n    options = __assign(__assign({}, options), {\n      rootFunc: boolbase.trueFunc\n    });\n  }\n  /*\n   * If we have another filter, recursively call `findFilterElements`,\n   * with the `recursive` flag disabled. We only have to look for more\n   * elements when we see a traversal.\n   *\n   * Otherwise,\n   */\n\n\n  return remainingSelector.some(positionals_js_1.isFilter) ? findFilterElements(result, remainingSelector, options, false, totalLimit) : remainingHasTraversal ? // Query existing elements to resolve traversal.\n  findElements(result, [remainingSelector], options, totalLimit) : // If we don't have any more traversals, simply filter elements.\n  filterElements(result, [remainingSelector], options);\n}\n\nfunction findElements(root, sel, options, limit) {\n  var query = (0, css_select_1._compileToken)(sel, options, root);\n  return find(root, query, limit);\n}\n\nfunction find(root, query, limit) {\n  if (limit === void 0) {\n    limit = Infinity;\n  }\n\n  var elems = (0, css_select_1.prepareContext)(root, DomUtils, query.shouldTestNextSiblings);\n  return DomUtils.find(function (node) {\n    return DomUtils.isTag(node) && query(node);\n  }, elems, true, limit);\n}\n\nfunction filterElements(elements, sel, options) {\n  var els = (Array.isArray(elements) ? elements : [elements]).filter(DomUtils.isTag);\n  if (els.length === 0) return els;\n  var query = (0, css_select_1._compileToken)(sel, options);\n  return query === boolbase.trueFunc ? els : els.filter(query);\n}","map":{"version":3,"mappings":"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","names":["Object","enumerable","get","UNIVERSAL_SELECTOR","type","css_what_1","Universal","namespace","SCOPE_PSEUDO","Pseudo","name","data","is","element","selector","options","some","exports","elements","plain","filtered","length","sel","filterByPosition","filter","elems","num","parseInt","NaN","isFinite","Math","abs","slice","_","i","filtered_1","Set","filterParsed","e","has","plainSelectors","filteredSelectors","found","filterElements","size","filteredSelector","missing","isTag","filterBySelector","forEach","el","add","root","_a","opts","context","relativeSelector","push","findFilterElements","select","limit","find","results","map","findElements","DomUtils","uniqueSort","reduce","a","b","queryForSelector","totalLimit","filterIndex","findIndex","positionals_js_1","sub","partLimit","Infinity","elemsNoLimit","Array","isArray","getChildren","result","remainingSelector","remainingHasTraversal","Sibling","Adjacent","unshift","rootFunc","includes","boolbase","trueFunc","query","shouldTestNextSiblings","node","els"],"sources":["index.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}
{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getLoad = void 0;\n\nvar options_js_1 = __importStar(require(\"./options.js\"));\n\nvar staticMethods = __importStar(require(\"./static.js\"));\n\nvar cheerio_js_1 = require(\"./cheerio.js\");\n\nvar utils_js_1 = require(\"./utils.js\");\n\nfunction getLoad(parse, render) {\n  /**\n   * Create a querying function, bound to a document created from the provided markup.\n   *\n   * Note that similar to web browser contexts, this operation may introduce\n   * `<html>`, `<head>`, and `<body>` elements; set `isDocument` to `false` to\n   * switch to fragment mode and disable this.\n   *\n   * @param content - Markup to be loaded.\n   * @param options - Options for the created instance.\n   * @param isDocument - Allows parser to be switched to fragment mode.\n   * @returns The loaded document.\n   * @see {@link https://cheerio.js.org#loading} for additional usage information.\n   */\n  return function load(content, options, isDocument) {\n    if (isDocument === void 0) {\n      isDocument = true;\n    }\n\n    if (content == null) {\n      throw new Error('cheerio.load() expects a string');\n    }\n\n    var internalOpts = __assign(__assign({}, options_js_1.default), (0, options_js_1.flatten)(options));\n\n    var initialRoot = parse(content, internalOpts, isDocument, null);\n    /** Create an extended class here, so that extensions only live on one instance. */\n\n    var LoadedCheerio =\n    /** @class */\n    function (_super) {\n      __extends(LoadedCheerio, _super);\n\n      function LoadedCheerio() {\n        return _super !== null && _super.apply(this, arguments) || this;\n      }\n\n      LoadedCheerio.prototype._make = function (selector, context) {\n        var cheerio = initialize(selector, context);\n        cheerio.prevObject = this;\n        return cheerio;\n      };\n\n      LoadedCheerio.prototype._parse = function (content, options, isDocument, context) {\n        return parse(content, options, isDocument, context);\n      };\n\n      LoadedCheerio.prototype._render = function (dom) {\n        return render(dom, this.options);\n      };\n\n      return LoadedCheerio;\n    }(cheerio_js_1.Cheerio);\n\n    function initialize(selector, context, root, opts) {\n      if (root === void 0) {\n        root = initialRoot;\n      } // $($)\n\n\n      if (selector && (0, utils_js_1.isCheerio)(selector)) return selector;\n\n      var options = __assign(__assign({}, internalOpts), (0, options_js_1.flatten)(opts));\n\n      var r = typeof root === 'string' ? [parse(root, options, false, null)] : 'length' in root ? root : [root];\n      var rootInstance = (0, utils_js_1.isCheerio)(r) ? r : new LoadedCheerio(r, null, options); // Add a cyclic reference, so that calling methods on `_root` never fails.\n\n      rootInstance._root = rootInstance; // $(), $(null), $(undefined), $(false)\n\n      if (!selector) {\n        return new LoadedCheerio(undefined, rootInstance, options);\n      }\n\n      var elements = typeof selector === 'string' && (0, utils_js_1.isHtml)(selector) ? // $(<html>)\n      parse(selector, options, false, null).children : isNode(selector) ? // $(dom)\n      [selector] : Array.isArray(selector) ? // $([dom])\n      selector : undefined;\n      var instance = new LoadedCheerio(elements, rootInstance, options);\n\n      if (elements) {\n        return instance;\n      }\n\n      if (typeof selector !== 'string') {\n        throw new Error('Unexpected type of selector');\n      } // We know that our selector is a string now.\n\n\n      var search = selector;\n      var searchContext = !context ? // If we don't have a context, maybe we have a root, from loading\n      rootInstance : typeof context === 'string' ? (0, utils_js_1.isHtml)(context) ? // $('li', '<ul>...</ul>')\n      new LoadedCheerio([parse(context, options, false, null)], rootInstance, options) : ( // $('li', 'ul')\n      search = \"\".concat(context, \" \").concat(search), rootInstance) : (0, utils_js_1.isCheerio)(context) ? // $('li', $)\n      context : // $('li', node), $('li', [nodes])\n      new LoadedCheerio(Array.isArray(context) ? context : [context], rootInstance, options); // If we still don't have a context, return\n\n      if (!searchContext) return instance;\n      /*\n       * #id, .class, tag\n       */\n\n      return searchContext.find(search);\n    } // Add in static methods & properties\n\n\n    Object.assign(initialize, staticMethods, {\n      load: load,\n      // `_root` and `_options` are used in static methods.\n      _root: initialRoot,\n      _options: internalOpts,\n      // Add `fn` for plugins\n      fn: LoadedCheerio.prototype,\n      // Add the prototype here to maintain `instanceof` behavior.\n      prototype: LoadedCheerio.prototype\n    });\n    return initialize;\n  };\n}\n\nexports.getLoad = getLoad;\n\nfunction isNode(obj) {\n  return !!obj.name || obj.type === 'root' || obj.type === 'text' || obj.type === 'comment';\n}","map":{"version":3,"mappings":"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","names":["getLoad","parse","render","load","content","options","isDocument","Error","internalOpts","options_js_1","initialRoot","__extends","LoadedCheerio","selector","context","cheerio","initialize","prevObject","dom","cheerio_js_1","root","opts","r","rootInstance","_root","undefined","elements","children","isNode","Array","isArray","instance","search","searchContext","concat","find","Object","assign","staticMethods","_options","fn","prototype","exports","obj","name","type"],"sources":["load.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}
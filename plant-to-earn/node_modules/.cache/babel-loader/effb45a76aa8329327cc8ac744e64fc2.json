{"ast":null,"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Parser = void 0;\n\nvar Tokenizer_js_1 = __importStar(require(\"./Tokenizer.js\"));\n\nvar decode_js_1 = require(\"entities/lib/decode.js\");\n\nvar formTags = new Set([\"input\", \"option\", \"optgroup\", \"select\", \"button\", \"datalist\", \"textarea\"]);\nvar pTag = new Set([\"p\"]);\nvar tableSectionTags = new Set([\"thead\", \"tbody\"]);\nvar ddtTags = new Set([\"dd\", \"dt\"]);\nvar rtpTags = new Set([\"rt\", \"rp\"]);\nvar openImpliesClose = new Map([[\"tr\", new Set([\"tr\", \"th\", \"td\"])], [\"th\", new Set([\"th\"])], [\"td\", new Set([\"thead\", \"th\", \"td\"])], [\"body\", new Set([\"head\", \"link\", \"script\"])], [\"li\", new Set([\"li\"])], [\"p\", pTag], [\"h1\", pTag], [\"h2\", pTag], [\"h3\", pTag], [\"h4\", pTag], [\"h5\", pTag], [\"h6\", pTag], [\"select\", formTags], [\"input\", formTags], [\"output\", formTags], [\"button\", formTags], [\"datalist\", formTags], [\"textarea\", formTags], [\"option\", new Set([\"option\"])], [\"optgroup\", new Set([\"optgroup\", \"option\"])], [\"dd\", ddtTags], [\"dt\", ddtTags], [\"address\", pTag], [\"article\", pTag], [\"aside\", pTag], [\"blockquote\", pTag], [\"details\", pTag], [\"div\", pTag], [\"dl\", pTag], [\"fieldset\", pTag], [\"figcaption\", pTag], [\"figure\", pTag], [\"footer\", pTag], [\"form\", pTag], [\"header\", pTag], [\"hr\", pTag], [\"main\", pTag], [\"nav\", pTag], [\"ol\", pTag], [\"pre\", pTag], [\"section\", pTag], [\"table\", pTag], [\"ul\", pTag], [\"rt\", rtpTags], [\"rp\", rtpTags], [\"tbody\", tableSectionTags], [\"tfoot\", tableSectionTags]]);\nvar voidElements = new Set([\"area\", \"base\", \"basefont\", \"br\", \"col\", \"command\", \"embed\", \"frame\", \"hr\", \"img\", \"input\", \"isindex\", \"keygen\", \"link\", \"meta\", \"param\", \"source\", \"track\", \"wbr\"]);\nvar foreignContextElements = new Set([\"math\", \"svg\"]);\nvar htmlIntegrationElements = new Set([\"mi\", \"mo\", \"mn\", \"ms\", \"mtext\", \"annotation-xml\", \"foreignobject\", \"desc\", \"title\"]);\nvar reNameEnd = /\\s|\\//;\n\nvar Parser =\n/** @class */\nfunction () {\n  function Parser(cbs, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    var _a, _b, _c, _d, _e;\n\n    this.options = options;\n    /** The start index of the last event. */\n\n    this.startIndex = 0;\n    /** The end index of the last event. */\n\n    this.endIndex = 0;\n    /**\n     * Store the start index of the current open tag,\n     * so we can update the start index for attributes.\n     */\n\n    this.openTagStart = 0;\n    this.tagname = \"\";\n    this.attribname = \"\";\n    this.attribvalue = \"\";\n    this.attribs = null;\n    this.stack = [];\n    this.foreignContext = [];\n    this.buffers = [];\n    this.bufferOffset = 0;\n    /** The index of the last written buffer. Used when resuming after a `pause()`. */\n\n    this.writeIndex = 0;\n    /** Indicates whether the parser has finished running / `.end` has been called. */\n\n    this.ended = false;\n    this.cbs = cbs !== null && cbs !== void 0 ? cbs : {};\n    this.lowerCaseTagNames = (_a = options.lowerCaseTags) !== null && _a !== void 0 ? _a : !options.xmlMode;\n    this.lowerCaseAttributeNames = (_b = options.lowerCaseAttributeNames) !== null && _b !== void 0 ? _b : !options.xmlMode;\n    this.tokenizer = new ((_c = options.Tokenizer) !== null && _c !== void 0 ? _c : Tokenizer_js_1.default)(this.options, this);\n    (_e = (_d = this.cbs).onparserinit) === null || _e === void 0 ? void 0 : _e.call(_d, this);\n  } // Tokenizer event handlers\n\n  /** @internal */\n\n\n  Parser.prototype.ontext = function (start, endIndex) {\n    var _a, _b;\n\n    var data = this.getSlice(start, endIndex);\n    this.endIndex = endIndex - 1;\n    (_b = (_a = this.cbs).ontext) === null || _b === void 0 ? void 0 : _b.call(_a, data);\n    this.startIndex = endIndex;\n  };\n  /** @internal */\n\n\n  Parser.prototype.ontextentity = function (cp) {\n    var _a, _b;\n    /*\n     * Entities can be emitted on the character, or directly after.\n     * We use the section start here to get accurate indices.\n     */\n\n\n    var idx = this.tokenizer.getSectionStart();\n    this.endIndex = idx - 1;\n    (_b = (_a = this.cbs).ontext) === null || _b === void 0 ? void 0 : _b.call(_a, (0, decode_js_1.fromCodePoint)(cp));\n    this.startIndex = idx;\n  };\n\n  Parser.prototype.isVoidElement = function (name) {\n    return !this.options.xmlMode && voidElements.has(name);\n  };\n  /** @internal */\n\n\n  Parser.prototype.onopentagname = function (start, endIndex) {\n    this.endIndex = endIndex;\n    var name = this.getSlice(start, endIndex);\n\n    if (this.lowerCaseTagNames) {\n      name = name.toLowerCase();\n    }\n\n    this.emitOpenTag(name);\n  };\n\n  Parser.prototype.emitOpenTag = function (name) {\n    var _a, _b, _c, _d;\n\n    this.openTagStart = this.startIndex;\n    this.tagname = name;\n    var impliesClose = !this.options.xmlMode && openImpliesClose.get(name);\n\n    if (impliesClose) {\n      while (this.stack.length > 0 && impliesClose.has(this.stack[this.stack.length - 1])) {\n        var el = this.stack.pop();\n        (_b = (_a = this.cbs).onclosetag) === null || _b === void 0 ? void 0 : _b.call(_a, el, true);\n      }\n    }\n\n    if (!this.isVoidElement(name)) {\n      this.stack.push(name);\n\n      if (foreignContextElements.has(name)) {\n        this.foreignContext.push(true);\n      } else if (htmlIntegrationElements.has(name)) {\n        this.foreignContext.push(false);\n      }\n    }\n\n    (_d = (_c = this.cbs).onopentagname) === null || _d === void 0 ? void 0 : _d.call(_c, name);\n    if (this.cbs.onopentag) this.attribs = {};\n  };\n\n  Parser.prototype.endOpenTag = function (isImplied) {\n    var _a, _b;\n\n    this.startIndex = this.openTagStart;\n\n    if (this.attribs) {\n      (_b = (_a = this.cbs).onopentag) === null || _b === void 0 ? void 0 : _b.call(_a, this.tagname, this.attribs, isImplied);\n      this.attribs = null;\n    }\n\n    if (this.cbs.onclosetag && this.isVoidElement(this.tagname)) {\n      this.cbs.onclosetag(this.tagname, true);\n    }\n\n    this.tagname = \"\";\n  };\n  /** @internal */\n\n\n  Parser.prototype.onopentagend = function (endIndex) {\n    this.endIndex = endIndex;\n    this.endOpenTag(false); // Set `startIndex` for next node\n\n    this.startIndex = endIndex + 1;\n  };\n  /** @internal */\n\n\n  Parser.prototype.onclosetag = function (start, endIndex) {\n    var _a, _b, _c, _d, _e, _f;\n\n    this.endIndex = endIndex;\n    var name = this.getSlice(start, endIndex);\n\n    if (this.lowerCaseTagNames) {\n      name = name.toLowerCase();\n    }\n\n    if (foreignContextElements.has(name) || htmlIntegrationElements.has(name)) {\n      this.foreignContext.pop();\n    }\n\n    if (!this.isVoidElement(name)) {\n      var pos = this.stack.lastIndexOf(name);\n\n      if (pos !== -1) {\n        if (this.cbs.onclosetag) {\n          var count = this.stack.length - pos;\n\n          while (count--) {\n            // We know the stack has sufficient elements.\n            this.cbs.onclosetag(this.stack.pop(), count !== 0);\n          }\n        } else this.stack.length = pos;\n      } else if (!this.options.xmlMode && name === \"p\") {\n        // Implicit open before close\n        this.emitOpenTag(\"p\");\n        this.closeCurrentTag(true);\n      }\n    } else if (!this.options.xmlMode && name === \"br\") {\n      // We can't use `emitOpenTag` for implicit open, as `br` would be implicitly closed.\n      (_b = (_a = this.cbs).onopentagname) === null || _b === void 0 ? void 0 : _b.call(_a, \"br\");\n      (_d = (_c = this.cbs).onopentag) === null || _d === void 0 ? void 0 : _d.call(_c, \"br\", {}, true);\n      (_f = (_e = this.cbs).onclosetag) === null || _f === void 0 ? void 0 : _f.call(_e, \"br\", false);\n    } // Set `startIndex` for next node\n\n\n    this.startIndex = endIndex + 1;\n  };\n  /** @internal */\n\n\n  Parser.prototype.onselfclosingtag = function (endIndex) {\n    this.endIndex = endIndex;\n\n    if (this.options.xmlMode || this.options.recognizeSelfClosing || this.foreignContext[this.foreignContext.length - 1]) {\n      this.closeCurrentTag(false); // Set `startIndex` for next node\n\n      this.startIndex = endIndex + 1;\n    } else {\n      // Ignore the fact that the tag is self-closing.\n      this.onopentagend(endIndex);\n    }\n  };\n\n  Parser.prototype.closeCurrentTag = function (isOpenImplied) {\n    var _a, _b;\n\n    var name = this.tagname;\n    this.endOpenTag(isOpenImplied); // Self-closing tags will be on the top of the stack\n\n    if (this.stack[this.stack.length - 1] === name) {\n      // If the opening tag isn't implied, the closing tag has to be implied.\n      (_b = (_a = this.cbs).onclosetag) === null || _b === void 0 ? void 0 : _b.call(_a, name, !isOpenImplied);\n      this.stack.pop();\n    }\n  };\n  /** @internal */\n\n\n  Parser.prototype.onattribname = function (start, endIndex) {\n    this.startIndex = start;\n    var name = this.getSlice(start, endIndex);\n    this.attribname = this.lowerCaseAttributeNames ? name.toLowerCase() : name;\n  };\n  /** @internal */\n\n\n  Parser.prototype.onattribdata = function (start, endIndex) {\n    this.attribvalue += this.getSlice(start, endIndex);\n  };\n  /** @internal */\n\n\n  Parser.prototype.onattribentity = function (cp) {\n    this.attribvalue += (0, decode_js_1.fromCodePoint)(cp);\n  };\n  /** @internal */\n\n\n  Parser.prototype.onattribend = function (quote, endIndex) {\n    var _a, _b;\n\n    this.endIndex = endIndex;\n    (_b = (_a = this.cbs).onattribute) === null || _b === void 0 ? void 0 : _b.call(_a, this.attribname, this.attribvalue, quote === Tokenizer_js_1.QuoteType.Double ? '\"' : quote === Tokenizer_js_1.QuoteType.Single ? \"'\" : quote === Tokenizer_js_1.QuoteType.NoValue ? undefined : null);\n\n    if (this.attribs && !Object.prototype.hasOwnProperty.call(this.attribs, this.attribname)) {\n      this.attribs[this.attribname] = this.attribvalue;\n    }\n\n    this.attribvalue = \"\";\n  };\n\n  Parser.prototype.getInstructionName = function (value) {\n    var idx = value.search(reNameEnd);\n    var name = idx < 0 ? value : value.substr(0, idx);\n\n    if (this.lowerCaseTagNames) {\n      name = name.toLowerCase();\n    }\n\n    return name;\n  };\n  /** @internal */\n\n\n  Parser.prototype.ondeclaration = function (start, endIndex) {\n    this.endIndex = endIndex;\n    var value = this.getSlice(start, endIndex);\n\n    if (this.cbs.onprocessinginstruction) {\n      var name = this.getInstructionName(value);\n      this.cbs.onprocessinginstruction(\"!\".concat(name), \"!\".concat(value));\n    } // Set `startIndex` for next node\n\n\n    this.startIndex = endIndex + 1;\n  };\n  /** @internal */\n\n\n  Parser.prototype.onprocessinginstruction = function (start, endIndex) {\n    this.endIndex = endIndex;\n    var value = this.getSlice(start, endIndex);\n\n    if (this.cbs.onprocessinginstruction) {\n      var name = this.getInstructionName(value);\n      this.cbs.onprocessinginstruction(\"?\".concat(name), \"?\".concat(value));\n    } // Set `startIndex` for next node\n\n\n    this.startIndex = endIndex + 1;\n  };\n  /** @internal */\n\n\n  Parser.prototype.oncomment = function (start, endIndex, offset) {\n    var _a, _b, _c, _d;\n\n    this.endIndex = endIndex;\n    (_b = (_a = this.cbs).oncomment) === null || _b === void 0 ? void 0 : _b.call(_a, this.getSlice(start, endIndex - offset));\n    (_d = (_c = this.cbs).oncommentend) === null || _d === void 0 ? void 0 : _d.call(_c); // Set `startIndex` for next node\n\n    this.startIndex = endIndex + 1;\n  };\n  /** @internal */\n\n\n  Parser.prototype.oncdata = function (start, endIndex, offset) {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;\n\n    this.endIndex = endIndex;\n    var value = this.getSlice(start, endIndex - offset);\n\n    if (this.options.xmlMode || this.options.recognizeCDATA) {\n      (_b = (_a = this.cbs).oncdatastart) === null || _b === void 0 ? void 0 : _b.call(_a);\n      (_d = (_c = this.cbs).ontext) === null || _d === void 0 ? void 0 : _d.call(_c, value);\n      (_f = (_e = this.cbs).oncdataend) === null || _f === void 0 ? void 0 : _f.call(_e);\n    } else {\n      (_h = (_g = this.cbs).oncomment) === null || _h === void 0 ? void 0 : _h.call(_g, \"[CDATA[\".concat(value, \"]]\"));\n      (_k = (_j = this.cbs).oncommentend) === null || _k === void 0 ? void 0 : _k.call(_j);\n    } // Set `startIndex` for next node\n\n\n    this.startIndex = endIndex + 1;\n  };\n  /** @internal */\n\n\n  Parser.prototype.onend = function () {\n    var _a, _b;\n\n    if (this.cbs.onclosetag) {\n      // Set the end index for all remaining tags\n      this.endIndex = this.startIndex;\n\n      for (var i = this.stack.length; i > 0; this.cbs.onclosetag(this.stack[--i], true));\n    }\n\n    (_b = (_a = this.cbs).onend) === null || _b === void 0 ? void 0 : _b.call(_a);\n  };\n  /**\n   * Resets the parser to a blank state, ready to parse a new HTML document\n   */\n\n\n  Parser.prototype.reset = function () {\n    var _a, _b, _c, _d;\n\n    (_b = (_a = this.cbs).onreset) === null || _b === void 0 ? void 0 : _b.call(_a);\n    this.tokenizer.reset();\n    this.tagname = \"\";\n    this.attribname = \"\";\n    this.attribs = null;\n    this.stack.length = 0;\n    this.startIndex = 0;\n    this.endIndex = 0;\n    (_d = (_c = this.cbs).onparserinit) === null || _d === void 0 ? void 0 : _d.call(_c, this);\n    this.buffers.length = 0;\n    this.bufferOffset = 0;\n    this.writeIndex = 0;\n    this.ended = false;\n  };\n  /**\n   * Resets the parser, then parses a complete document and\n   * pushes it to the handler.\n   *\n   * @param data Document to parse.\n   */\n\n\n  Parser.prototype.parseComplete = function (data) {\n    this.reset();\n    this.end(data);\n  };\n\n  Parser.prototype.getSlice = function (start, end) {\n    while (start - this.bufferOffset >= this.buffers[0].length) {\n      this.shiftBuffer();\n    }\n\n    var str = this.buffers[0].slice(start - this.bufferOffset, end - this.bufferOffset);\n\n    while (end - this.bufferOffset > this.buffers[0].length) {\n      this.shiftBuffer();\n      str += this.buffers[0].slice(0, end - this.bufferOffset);\n    }\n\n    return str;\n  };\n\n  Parser.prototype.shiftBuffer = function () {\n    this.bufferOffset += this.buffers[0].length;\n    this.writeIndex--;\n    this.buffers.shift();\n  };\n  /**\n   * Parses a chunk of data and calls the corresponding callbacks.\n   *\n   * @param chunk Chunk to parse.\n   */\n\n\n  Parser.prototype.write = function (chunk) {\n    var _a, _b;\n\n    if (this.ended) {\n      (_b = (_a = this.cbs).onerror) === null || _b === void 0 ? void 0 : _b.call(_a, new Error(\".write() after done!\"));\n      return;\n    }\n\n    this.buffers.push(chunk);\n\n    if (this.tokenizer.running) {\n      this.tokenizer.write(chunk);\n      this.writeIndex++;\n    }\n  };\n  /**\n   * Parses the end of the buffer and clears the stack, calls onend.\n   *\n   * @param chunk Optional final chunk to parse.\n   */\n\n\n  Parser.prototype.end = function (chunk) {\n    var _a, _b;\n\n    if (this.ended) {\n      (_b = (_a = this.cbs).onerror) === null || _b === void 0 ? void 0 : _b.call(_a, Error(\".end() after done!\"));\n      return;\n    }\n\n    if (chunk) this.write(chunk);\n    this.ended = true;\n    this.tokenizer.end();\n  };\n  /**\n   * Pauses parsing. The parser won't emit events until `resume` is called.\n   */\n\n\n  Parser.prototype.pause = function () {\n    this.tokenizer.pause();\n  };\n  /**\n   * Resumes parsing after `pause` was called.\n   */\n\n\n  Parser.prototype.resume = function () {\n    this.tokenizer.resume();\n\n    while (this.tokenizer.running && this.writeIndex < this.buffers.length) {\n      this.tokenizer.write(this.buffers[this.writeIndex++]);\n    }\n\n    if (this.ended) this.tokenizer.end();\n  };\n  /**\n   * Alias of `write`, for backwards compatibility.\n   *\n   * @param chunk Chunk to parse.\n   * @deprecated\n   */\n\n\n  Parser.prototype.parseChunk = function (chunk) {\n    this.write(chunk);\n  };\n  /**\n   * Alias of `end`, for backwards compatibility.\n   *\n   * @param chunk Optional final chunk to parse.\n   * @deprecated\n   */\n\n\n  Parser.prototype.done = function (chunk) {\n    this.end(chunk);\n  };\n\n  return Parser;\n}();\n\nexports.Parser = Parser;","map":{"version":3,"mappings":"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","names":["formTags","Set","pTag","tableSectionTags","ddtTags","rtpTags","openImpliesClose","Map","voidElements","foreignContextElements","htmlIntegrationElements","reNameEnd","cbs","options","lowerCaseTagNames","lowerCaseTags","_a","xmlMode","lowerCaseAttributeNames","_b","tokenizer","Tokenizer","_c","Tokenizer_js_1","onparserinit","_e","Parser","start","endIndex","data","getSlice","ontext","startIndex","cp","idx","getSectionStart","name","has","toLowerCase","emitOpenTag","openTagStart","tagname","impliesClose","get","stack","length","el","pop","onclosetag","isVoidElement","push","foreignContext","onopentagname","_d","onopentag","attribs","isImplied","endOpenTag","pos","lastIndexOf","count","closeCurrentTag","_f","recognizeSelfClosing","onopentagend","isOpenImplied","attribname","attribvalue","quote","onattribute","Double","Single","NoValue","undefined","Object","prototype","hasOwnProperty","call","value","search","substr","onprocessinginstruction","getInstructionName","offset","oncomment","oncommentend","recognizeCDATA","oncdatastart","oncdataend","_h","_k","i","onend","onreset","reset","buffers","bufferOffset","writeIndex","ended","end","shiftBuffer","str","slice","shift","chunk","onerror","Error","running","write","pause","resume","exports"],"sources":["Parser.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}